<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.kuqi.Mapper.AdminBackstageMapper">
  <resultMap id="BaseResultMap" type="cn.kuqi.Pojo.Users">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Oct 11 14:40:37 CST 2018.
    -->
    <id column="U_ID" jdbcType="INTEGER" property="uId" />
    <result column="U_Name" jdbcType="VARCHAR" property="uName" />
    <result column="U_Nickname" jdbcType="VARCHAR" property="uNickname" />
    <result column="U_Signature" jdbcType="VARCHAR" property="uSignature" />
    <result column="U_Email" jdbcType="VARCHAR" property="uEmail" />
    <result column="U_Psw" jdbcType="CHAR" property="uPsw" />
    <result column="U_RegisterTime" jdbcType="VARCHAR" property="uRegistertime" />
    <result column="U_Permission" jdbcType="INTEGER" property="uPermission" />
  </resultMap>
  
  <resultMap type="cn.kuqi.Pojo.ArticleClassfiyExt" id="ClassfiyResultMap">
  	<collection property="data" ofType="ArticleClassfiy">
  		<id column="AC_Number" property="acNumber" />
  		<result column="AC_ClassfiyName" property="acClassfiyname" />
  		<result column="AC_Remark" property="acRemark"/>
  	</collection>
  </resultMap>
  
  <resultMap id="ClassfiyResult" type="cn.kuqi.Pojo.ArticleClassfiy">
    <id column="AC_Number" jdbcType="INTEGER" property="acNumber" />
    <result column="AC_ClassfiyName" jdbcType="VARCHAR" property="acClassfiyname" />
    <result column="AC_Remark" jdbcType="VARCHAR" property="acRemark" />
  </resultMap>
  
  <!-- 查询所有的文章的list的映射 -->
  <resultMap type="cn.kuqi.Pojo.ArticleExt" id="QueryArticleList">
  	<collection property="data" ofType="Article">
  		<id column="A_Number"  property="aNumber" />
	    <result column="A_ID" property="aId" />
	    <result column="A_ViewCount" property="aViewcount" />
	    <result column="A_Praise" property="aPraise" />
	    <result column="A_Content" property="aContent" />
	    <result column="A_Trample" property="aTrample" />
	    <result column="A_PublishTime" property="aPublishtime" />
	    <result column="A_CollectedCount" property="aCollectedcount" />
	    <result column="A_Type" property="aType" />
  	</collection>
  </resultMap>
  
  
  <resultMap type="cn.kuqi.Pojo.Article" id="QueryArticle">
 	<id column="A_Number"  property="aNumber" />
    <result column="A_ID" property="aId" />
    <result column="A_ViewCount" property="aViewcount" />
    <result column="A_Praise" property="aPraise" />
    <result column="A_Content" property="aContent" />
    <result column="A_Trample" property="aTrample" />
    <result column="A_PublishTime" property="aPublishtime" />
    <result column="A_CollectedCount" property="aCollectedcount" />
    <result column="A_Type" property="aType" />
  </resultMap>
  
  
  <!-- 通过用户名查询Users  -->
  <select id="QueryUserInfoByName" parameterType="java.lang.String" resultMap="BaseResultMap">
  		select * from users where U_Name= #{username}
  </select>
  
  <!-- 通过邮箱查询Users  -->
  <select id="QueryUserInfoByEmail" parameterType="java.lang.String" resultMap="BaseResultMap">
  		select * from users where U_Email= #{email}
  </select>
  
  <!-- 查询所有的文章分类 -->
  <select id="QueryAllClassfiy" resultMap="ClassfiyResultMap">
  		select * from article_classfiy
  </select>
  
  <!-- 添加分类 -->
  <insert id="InsertClassfiy">
  		insert into article_classfiy (AC_ClassfiyName,AC_Remark) value(#{Name},#{Remark})
  </insert>
  
  <!-- 修改查询分类 -->
  <select id="SelectArtcleClassfiyByNumber" parameterType="int" resultMap="ClassfiyResult">
  		select * from article_classfiy where AC_Number = #{Number}
  </select>
  
  <!-- 修改分类 -->
  <update id="UpdataArtcleClassfiyByNumber">
		UPDATE article_classfiy SET AC_ClassfiyName = #{ClassfiyName}, AC_Remark = #{ClassfiyRemark} WHERE AC_Number = #{Number}   
  </update>
  
  <!-- 删除分类 -->
  <delete id="DeleteArtcleClassfiyByNumber">
  		delete from article_classfiy where AC_Number=#{Number}
  </delete>
  
  <!-- 查询所有文章 -->
  <select id="QueryAllArticle" resultMap="QueryArticleList">
  		select * from article
  </select>
  
  <!-- 查询单篇文章 -->
  <select id="QueryArticleByNumber" resultMap="QueryArticle">
  		select * from article where A_Number=#{Number}
  </select>
  
  <!-- 删除单篇文章 -->
  <delete id="DeleteArticleByNumber">
  		delete from article where A_Number=#{Number}
  </delete>
  
  <!-- 修改单篇文章 -->
  <update id="UpdataArticleByNumber">
		UPDATE article SET A_Content = #{Content} WHERE A_Number = #{Number}   
  </update>
  
  <!-- 通过分类来查找文章 -->
  <select id="QueryArticleByClassfiy" resultMap="QueryArticleList">
  		select article.* from article where A_ID=#{ClassfiyNumber}
  </select>
  
</mapper>